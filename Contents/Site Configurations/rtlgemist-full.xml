<?xml version="1.0" encoding="UTF-8"?>
<site site="http://www.rtl.nl.*#full.*"
	plugin="silverlight"
	initialState="wait-for-frame-load"
	version="1.0">

	<crop x="0" y="98" width="540" height="404" />
	<!-- The seekbar doesn't work (yet) because the player hides it after a couple of seconds -->
	<seekbar type="thumb">
		<start x="133" y="-15" />
		<end x="422" y="-15" />
		<played>
			<color rgb="e87809" />
		</played>
	</seekbar>

	<!-- Wait-for-frame-load -->
	<state name="wait-for-frame-load">
		<event>
			<condition>
				<frameLoaded />
			</condition>
			<action>
				<run script="var x=document.location.hash.split('||');" />
				<run script="var player='&lt;object id=&quot;silverlight_control&quot; data=&quot;data:application/x-silverlight,&quot; type=&quot;application/x-silverlight-2&quot; height=&quot;600&quot; width=&quot;540&quot;&gt;&lt;param name=&quot;source&quot; value=&quot;%{xap}&quot;&gt;&lt;param name=&quot;initParams&quot; value=&quot;ControllerSize=1,DefaultVolumeValue=100,asxurl=%{asx}&quot;&gt;&lt;/object&gt;';" />
				<run script="player=player.replace('%{xap}',x[1]);player=player.replace('%{asx}',x[2]);" />
				<run script="document.getElementsByTagName('html')[0].innerHTML=player;" />
				<goto state="playing" />
			</action>
		</event>
	</state>

	<!-- Playing -->
	<state name="playing">
		<event>
			<condition>
				<command name="pause" />
			</condition>
			<action>
				<move x="113" y="-29" />
				<pause time="100" />
				<click x="113" y="-29" />
				<goto state="paused" />
			</action>
		</event>

		<!-- Video ends -->
		<event>
			<condition>
				<and>
					<color x="133" y="-15" op="dimmer-than" rgb="ffffff" />
					<color x="113" y="-29" rgb="ffffff" />
				</and>
			</condition>
			<action>
				<goto state="end" />
			</action>
		</event>
	</state>

	<!-- Paused -->
	<state name="paused">
		<event>
			<condition>
				<command name="play" />
			</condition>
			<action>
				<click x="113" y="-29" />
				<goto state="playing" />
			</action>
		</event>
	</state>
</site>